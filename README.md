Python P2P 블록체인 시뮬레이터 (with Dashboard)

본 프로젝트는 Python과 Flask를 사용하여 P2P(Peer-to-Peer) 네트워크에서 작동하는 블록체인 핵심 원리를 시뮬레이션합니다.

'일꾼' 역할을 하는 블록체인 노드(API 서버)와, 이 노드들을 한눈에 감시하고 제어하는 '관제실' 대시보드로 구성되어 있습니다.

🚀 프로젝트의 핵심 기능

P2P 네트워크: 여러 노드(터미널)가 서로를 자동으로 인식합니다.

합의 알고리즘: '가장 긴 체인 원칙'에 따라 네트워크의 체인 동기화가 가능합니다.

자동 전파 (Gossip):

새로운 거래가 생성되면 모든 노드에게 자동으로 전파됩니다.

한 노드가 채굴에 성공하면, 생성된 블록이 모든 노드에게 자동으로 전파(동기화)됩니다.

불변성 검증: 하드코딩된 '제네시스 블록'을 기준으로, 노드 시작 시 및 동기화 시 체인의 무결성을 검증합니다.

시각적 대시보드: 웹 브라우저(http://127.0.0.1:8000)에서 모든 노드의 상태를 실시간으로 확인하고 제어할 수 있습니다.

🛠️ 1. 사전 준비: 환경 설정

본 프로젝트를 실행하려면 Python 3가 설치되어 있어야 하며, Flask와 requests 라이브러리가 필요합니다.

터미널(명령 프롬프트)을 열고 다음 명령어를 실행하여 필요한 라이브러리를 설치합니다.

pip install flask
pip install requests


🗂️ 2. 파일 구조

프로젝트를 실행하기 위해, 파일들이 다음과 같은 구조로 배치되어야 합니다.

/MyBlockchainProject (프로젝트 폴더)
    |
    ├── blockchain_node_v3.py   (블록체인 '일꾼 노드' 서버)
    |
    ├── dashboard.py           (시각적 '관제실' 서버)
    |
    └── /templates             (대시보드 HTML을 담는 폴더)
        |
        └── dashboard.html     (대시보드 HTML 파일)


blockchain_node_v3.py 파일을 저장합니다.

dashboard.py 파일을 blockchain_node_v3.py와 같은 위치에 저장합니다.

templates 라는 이름의 새 폴더를 만듭니다.

dashboard.html 파일을 그 templates 폴더 안에 저장합니다.

🖥️ 3. 실행 방법 (시뮬레이션 시작)

총 3개의 터미널 창이 필요합니다. (노드 2개 + 대시보드 1개)

1단계: '일꾼 노드' 실행하기

➡️ 첫 번째 터미널 (노드 1)

python blockchain_node_v3.py --port 5000


[5000번 노드] ... 이웃 노드로 ...:5001를 등록 시도합니다.

[5000번 노드] ... 서버 시작 전, 네트워크 동기화를 시도합니다...

[5000번 노드] ... 이미 최신 체인을 가지고 있습니다.

[5000번 노드] http://127.0.0.1:5000 에서 서버를 시작합니다.

(위와 같은 메시지가 나오면 성공)

➡️ 두 번째 터미널 (노드 2)

python blockchain_node_v3.py --port 5001


[5001번 노드] ... 이웃 노드로 ...:5000를 등록 시도합니다.

[5001번 노드] ... 서버 시작 전, 네트워크 동기화를 시도합니다...

[5001번 노드] ... 이미 최신 체인을 가지고 있습니다.

[5001번 노드] http://127.0.0.1:5001 에서 서버를 시작합니다.

(위와 같은 메시지가 나오면 성공)

팁: 노드를 5개 띄우고 싶다면, blockchain_node_v3.py와 dashboard.py 안의 ALL_PEERS 리스트에 ...:5002, ...:5003 등을 추가하고, 터미널 5개를 열어 각각 다른 포트로 실행하면 됩니다.

2단계: '관제실 대시보드' 실행하기

➡️ 세 번째 터미널 (대시보드)

python dashboard.py


* Running on http://127.0.0.1:8000

(위 메시지가 나오면 성공)

🕹️ 4. 사용 방법 (대시보드)

모든 터미널을 그대로 켜둔 상태로, 웹 브라우저를 열고 다음 주소로 접속합니다.

http://127.0.0.1:8000

이제 모든 작업은 터미널이 아닌, 이 웹사이트에서 이루어집니다.

실시간 상태 확인: 5000번, 5001번 노드의 '상태', '체인 길이', '대기 거래' 수를 한눈에 볼 수 있습니다. (페이지를 새로고침하면 정보가 업데이트됩니다.)

거래 생성하기:

오른쪽 '새 거래 생성' 폼에 Alice, Bob, 10 등을 입력합니다.

[거래 생성 및 전파] 버튼을 누릅니다.

거래가 양쪽 노드(5000, 5001)에 자동으로 전파됩니다.

페이지가 새로고침되면서, 양쪽 노드의 '대기 거래' 수가 1로 바뀐 것을 확인합니다.

채굴 및 자동 동기화 테스트:

5000번 노드 줄에 있는 [채굴] 버튼을 클릭합니다.

5000번 노드가 'Alice'의 거래가 담긴 블록을 채굴합니다.

채굴 직후, 5000번 노드는 5001번 노드에게 새 블록을 자동으로 전파합니다.

페이지가 새로고침되면, 5000번과 5001번 노드의 '체인 길이'가 동시에 2로 늘어나고 '대기 거래'는 다시 0이 된 것을 볼 수 있습니다. (P2P 자동 동기화 성공)

수동 동기화 테스트 (IBD):

5001번 노드(터미널 2)를 Ctrl+C로 종료합니다.

대시보드에서 5000번 노드의 [채굴] 버튼을 2~3번 더 누릅니다. (5000번 체인 길이: 4)

대시보드를 새로고침하면 5001번 노드는 'Offline'으로 표시됩니다.

터미널 2에서 python blockchain_node_v3.py --port 5001을 다시 실행합니다.

5001번 노드는 켜지자마자 이웃(5000번)에게 "체인 내놔"를 시전합니다. (초기 동기화)

대시보드를 새로고침하면, 5001번 노드가 'Online'이 되자마자 '체인 길이'가 4로 동기화된 것을 확인할 수 있습니다.